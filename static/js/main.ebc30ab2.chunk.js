(this["webpackJsonpmovies-msu"]=this["webpackJsonpmovies-msu"]||[]).push([[0],{10:function(e,t,n){e.exports={movie:"Movie_movie__1ozoL",img:"Movie_img__1sH5E",info:"Movie_info__lOcEs",info_img:"Movie_info_img__1cyz2",genres:"Movie_genres__3VmGK",genre:"Movie_genre__34ZA7",button:"Movie_button__morC0",subtitle:"Movie_subtitle__qOOOU",title:"Movie_title__3ktox",year:"Movie_year__3byxd"}},16:function(e,t,n){e.exports={pagination:"Pagination_pagination__2mun4",button:"Pagination_button__1gJAn",current:"Pagination_current__3C6x9"}},24:function(e,t,n){e.exports={header:"Header_header__2aYx7",inner:"Header_inner__1YaLL"}},29:function(e,t,n){e.exports={movies:"Movies_movies__3oxl2",inner:"Movies_inner__3Mgsg"}},30:function(e,t,n){e.exports={loader:"Loader_loader__5FsOI",lds_ellipsis:"Loader_lds_ellipsis__3n7Vj","lds-ellipsis1":"Loader_lds-ellipsis1__Ogz-t","lds-ellipsis2":"Loader_lds-ellipsis2__30Res","lds-ellipsis3":"Loader_lds-ellipsis3__3e090"}},4:function(e,t,n){e.exports={page:"MoviePage_page__qxpjY",inner:"MoviePage_inner__3dLlr",left:"MoviePage_left__sYTXI",right:"MoviePage_right__2TIau",img:"MoviePage_img__3RBlN",img_info:"MoviePage_img_info__1kqMp",img_icon:"MoviePage_img_icon__xmczG",title:"MoviePage_title__2K5z5",year:"MoviePage_year__1JSER",genres:"MoviePage_genres__1-lqw",genre:"MoviePage_genre__2R5jr",genre_cicrle:"MoviePage_genre_cicrle__3lr3s",synopsis:"MoviePage_synopsis__HQypl",synopsis_title:"MoviePage_synopsis_title__QOHLg",synopsis_description:"MoviePage_synopsis_description__3D_4R"}},47:function(e,t,n){},5:function(e,t,n){e.exports={title:"Comments_title__1UaxB",comment:"Comments_comment__uoPjZ",comment_info:"Comments_comment_info__3chWw",comment_author:"Comments_comment_author__1k85w",comment_date:"Comments_comment_date__1euOO",comments_body:"Comments_comments_body__2bSt0",comment_body:"Comments_comment_body__3HKZf",delete_button:"Comments_delete_button__orZJG",comments_textarea:"Comments_comments_textarea___dSwB",form_inner:"Comments_form_inner__34JEt",textarea:"Comments_textarea__30eGq",button:"Comments_button__1Bpj5"}},76:function(e,t,n){"use strict";n.r(t);var i,c=n(1),s=n(22),a=n.n(s),o=(n(47),n(11)),r=n(14),l=o.c;!function(e){e.SET_MOVIES_LIST="GET_MOVIES_LIST",e.SET_IS_FETCHING="SET_IS_FETCHING",e.SET_CURRENT_PAGE="SET_CURRENT_PAGE",e.SET_CURRENT_MOVIE="SET_CURRENT_MOVIE"}(i||(i={}));var m=n(40),d=n.n(m).a.create({baseURL:"https://yts.mx/api/v2/"}),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return d.get("/list_movies.json?page=".concat(e))},j=function(e){return d.get("/movie_details.json?movie_id=".concat(e))},u=function(e){return{type:i.SET_IS_FETCHING,payload:e}},v=function(e){return{type:i.SET_CURRENT_MOVIE,payload:e}},b=function(e,t){return function(n){n(u(!0)),_(e,t).then((function(e){var t;n((t=e.data.data.movies,{type:i.SET_MOVIES_LIST,payload:t})),n(function(e){return{type:i.SET_CURRENT_PAGE,payload:e}}(e.data.data.page_number))})).catch((function(e){console.log(e)})).finally((function(){n(u(!1))}))}},O=n(16),g=n.n(O),x=n(0),f=function(){var e=Object(o.b)(),t=l((function(e){return e.moviesReducer.page}));function n(t){e(b(t))}return Object(x.jsxs)("div",{className:g.a.pagination,children:[t-1>0&&Object(x.jsx)("div",{className:g.a.button,onClick:function(e){return n(t-1)},children:t-1}),Object(x.jsx)("div",{className:"".concat(g.a.button," ").concat(g.a.current),children:t}),Object(x.jsx)("div",{className:g.a.button,onClick:function(e){return n(t+1)},children:t+1})]})},h=n(24),p=n.n(h),N=function(){var e=l((function(e){return e.moviesReducer.currentMovie})),t=Object(o.b)(),n=function(){t(v(null))};return Object(x.jsx)("div",{className:p.a.header,children:Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:p.a.inner,children:[Object(x.jsx)(r.c,{to:"/",className:p.a.title,onClick:n,children:e?e.title:"Movies"}),e?Object(x.jsx)(r.c,{to:"/",onClick:n,children:"Back"}):Object(x.jsx)(f,{})]})})})},y=n(29),E=n.n(y),M=n(10),S=n.n(M),C=n.p+"static/media/star.ed7b0440.svg",I=n.p+"static/media/empty.817176e3.png",T=n(20),R=function(e){var t=e.preloader,n=e.img,i=Object(c.useState)(!1),s=Object(T.a)(i,2),a=s[0],o=s[1],r=new Image;return r.src=n,r.onload=function(){o(!0)},a?Object(x.jsx)("img",{src:n}):Object(x.jsx)("img",{src:t})},P=function(e){var t=e.title,n=e.bg,i=e.rating,c=e.genres,s=e.year,a=e.id,o=null===c||void 0===c?void 0:c.slice(0,3);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:S.a.movie,children:Object(x.jsxs)(r.b,{to:"/movie/".concat(a),children:[Object(x.jsx)("div",{className:S.a.inner,children:Object(x.jsx)("div",{className:S.a.backgroung,children:Object(x.jsxs)("div",{className:S.a.img,children:[Object(x.jsxs)("div",{className:S.a.info,children:[Object(x.jsxs)("div",{className:S.a.info_img,children:[Object(x.jsx)("img",{src:C,alt:"star"}),Object(x.jsx)("span",{children:0===i?"No ratings":i.toFixed(1)})]}),Object(x.jsx)("div",{className:S.a.genres,children:null===o||void 0===o?void 0:o.map((function(e){return Object(x.jsx)("div",{className:S.a.genre,children:e},e)}))}),Object(x.jsx)("div",{className:S.a.button,children:"More"})]}),Object(x.jsx)(R,{img:n,preloader:I})]})})}),Object(x.jsxs)("div",{className:S.a.subtitle,children:[Object(x.jsx)("div",{className:S.a.title,children:t}),Object(x.jsx)("div",{className:S.a.year,children:s})]})]})})})},L=function(){var e=l((function(e){return e.moviesReducer})).movies;return Object(x.jsx)("div",{className:E.a.movies,children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:E.a.inner,children:e.map((function(e){return Object(x.jsx)(P,{title:e.title,bg:e.large_cover_image,rating:e.rating,genres:e.genres,year:e.year,id:e.id},e.id)}))})})})},w=n(30),F=n.n(w),G=function(){return Object(x.jsx)("div",{className:F.a.loader,children:Object(x.jsxs)("div",{className:F.a.lds_ellipsis,children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})})},k=n(3),D=n(4),U=n.n(D),B=n(17),H=n(5),V=n.n(H),J=n.p+"static/media/arrow.c17cc02a.svg",A=function(e){var t=e.date,n=e.value,i=e.author,c=e.id,s=e.fn;return Object(x.jsx)("div",{className:V.a.comment,children:Object(x.jsxs)("div",{className:V.a.comment_body,children:[Object(x.jsxs)("div",{className:V.a.comment_info,children:[Object(x.jsx)("div",{className:V.a.comment_author,children:i}),Object(x.jsx)("div",{className:V.a.comment_date,children:t})]}),Object(x.jsx)("div",{className:V.a.comment_value,children:n}),Object(x.jsx)("div",{className:V.a.delete_button,onClick:function(){return s(c)}})]})})},q=function(e){var t=e.filmId;function n(e){var t=localStorage.getItem("comments")||"[]",n=JSON.parse(t)||[],i=n.find((function(t){return t.filmId===e}))||{filmId:e,comments:[]};return{commentsDB:n,currentMovieComments:i}}function i(e){if(e.preventDefault(),r.trim()){var i,c=n(t),s=c.commentsDB,a=c.currentMovieComments,o=new Date;o.toLocaleDateString();var m,d={id:(null===(i=a.comments[0])||void 0===i?void 0:i.id)+1||1,date:o.toLocaleDateString(),author:"You",value:r};a.comments=[d].concat(Object(B.a)(a.comments)),m=s.some((function(e){return e.filmId===t}))?Object(B.a)(s.map((function(e){return e.filmId===t?a:e}))):[].concat(Object(B.a)(s),[a]),localStorage.setItem("comments",JSON.stringify(m)),j(a),l("")}}function s(e){var i=n(t),c=i.commentsDB,s=i.currentMovieComments;s.comments=Object(B.a)(s.comments.filter((function(t){return t.id!==e})));var a=Object(B.a)(c.map((function(e){return e.filmId===t?s:e})));localStorage.setItem("comments",JSON.stringify(a)),j(s)}var a=Object(c.useState)(""),o=Object(T.a)(a,2),r=o[0],l=o[1],m=Object(c.useState)(null),d=Object(T.a)(m,2),_=d[0],j=d[1];return Object(c.useEffect)((function(){var e=n(t),i=(e.commentsDB,e.currentMovieComments);j(i||null)}),[]),Object(x.jsxs)("div",{className:V.a.comments,children:[Object(x.jsx)("div",{className:V.a.title,children:"Comments"}),Object(x.jsx)("div",{className:V.a.comments_body,children:(null===_||void 0===_?void 0:_.comments.length)?_.comments.map((function(e){return Object(x.jsx)(A,{date:e.date,author:e.author,value:e.value,id:e.id,fn:s})})):"No comments"}),Object(x.jsx)("div",{className:V.a.comments_textarea,children:Object(x.jsx)("form",{action:"",onSubmit:function(e){return i(e)},onKeyDown:function(e){"Enter"===e.code&&i(e)},children:Object(x.jsxs)("div",{className:V.a.form_inner,children:[Object(x.jsx)("div",{className:V.a.textarea,children:Object(x.jsx)("textarea",{name:"new_comment",value:r,onChange:function(e){return l(e.target.value)}})}),Object(x.jsx)("div",{className:V.a.button,children:Object(x.jsx)("button",{type:"submit",children:Object(x.jsx)("img",{src:J,alt:"arrowImg"})})})]})})})]})},z=function(e){var t=e.title;return Object(x.jsxs)("div",{className:U.a.genre,children:[Object(x.jsx)("div",{className:U.a.genre_cicrle}),Object(x.jsx)("div",{className:U.a.genre_title,children:t})]})},Y=function(e){var t=Object(o.b)(),n=l((function(e){return e.moviesReducer})),i=n.currentMovie,s=n.isFetching;return Object(c.useEffect)((function(){var n,i=e.match.params.id;t((n=+i,function(e){e(u(!0)),j(n).then((function(t){e(v(t.data.data.movie))})).catch((function(e){console.log(e)})).finally((function(){e(u(!1))}))}))}),[]),Object(x.jsx)(x.Fragment,{children:s?Object(x.jsx)(G,{}):Object(x.jsx)("div",{className:U.a.page,children:Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:U.a.inner,children:[Object(x.jsx)("div",{className:U.a.left,children:Object(x.jsxs)("div",{className:U.a.img,children:[Object(x.jsx)(R,{img:(null===i||void 0===i?void 0:i.large_cover_image)||"",preloader:I}),Object(x.jsxs)("div",{className:U.a.img_info,children:[Object(x.jsx)("div",{className:U.a.img_icon,children:Object(x.jsx)("img",{src:C,alt:""})}),null===i||void 0===i?void 0:i.rating.toFixed(1)]})]})}),Object(x.jsxs)("div",{className:U.a.right,children:[Object(x.jsx)("div",{className:U.a.title,children:null===i||void 0===i?void 0:i.title}),Object(x.jsx)("div",{className:U.a.year,children:null===i||void 0===i?void 0:i.year}),Object(x.jsx)("div",{className:U.a.genres,children:null===i||void 0===i?void 0:i.genres.map((function(e,t){return Object(x.jsx)(z,{title:e},t)}))}),Object(x.jsxs)("div",{className:U.a.synopsis,children:[Object(x.jsx)("div",{className:U.a.synopsis_title,children:"Synopsis"}),Object(x.jsx)("div",{className:U.a.synopsis_description,children:null===i||void 0===i?void 0:i.description_full})]}),Object(x.jsx)(q,{filmId:(null===i||void 0===i?void 0:i.id)||1})]})]})})})})};var K=function(){var e=Object(o.b)(),t=l((function(e){return e.moviesReducer})).isFetching;return Object(c.useEffect)((function(){e(b())}),[]),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(N,{}),Object(x.jsxs)(k.d,{children:[Object(x.jsx)(k.b,{exact:!0,path:"/",children:t?Object(x.jsx)(G,{}):Object(x.jsx)(L,{})}),Object(x.jsx)(k.b,{path:"/movie/:id",component:Y}),Object(x.jsx)(k.a,{to:"/"})]})]})},Z=n(21),Q=n(41),W=n(13),X={isFetching:!1,page:1,limit:8,movies:[],currentMovie:null},$=n(42),ee=Object(Z.combineReducers)({moviesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.SET_IS_FETCHING:return Object(W.a)(Object(W.a)({},e),{},{isFetching:t.payload});case i.SET_MOVIES_LIST:return Object(W.a)(Object(W.a)({},e),{},{movies:t.payload});case i.SET_CURRENT_PAGE:return Object(W.a)(Object(W.a)({},e),{},{page:t.payload});case i.SET_CURRENT_MOVIE:return Object(W.a)(Object(W.a)({},e),{},{currentMovie:t.payload});default:return e}}}),te=Object(Z.createStore)(ee,Object(Q.composeWithDevTools)(Object(Z.applyMiddleware)($.a)));a.a.render(Object(x.jsx)(r.a,{children:Object(x.jsx)(o.a,{store:te,children:Object(x.jsx)(K,{})})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.ebc30ab2.chunk.js.map